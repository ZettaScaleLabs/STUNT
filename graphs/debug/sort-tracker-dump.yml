flow: ControlDataDump
configuration:
  host: '192.168.122.35'
operators:
  - id: ObjectDetection
    configuration:
      obstacle_detection_model_path: /home/ato/Workspace/models/obstacle_detection/faster-rcnn
      path_coco_labels: {{ BASE_DIR }}/nodes/operators/obstacle-detector/STUNT.names
    descriptor: {{ BASE_DIR }}/nodes/operators/obstacle-detector/obstacle-detector.yml

  - id: TTD
    descriptor:  {{ BASE_DIR }}/nodes/operators/time-to-decision/time-to-decision.yml

  - id: SortTracker
    descriptor:  {{ BASE_DIR }}/nodes/operators/sort-tracker/sort-tracker.yml

sources:
  - id : Camera
    configuration:
      mode: "client"
      key_expression: "stunt/center-camera"
    descriptor : {{ BASE_DIR }}/nodes/sources/zenoh-camera/zenoh-camera.yml

  - id : CarlaLocalization
    descriptor : {{ BASE_DIR }}/nodes/sources/ground-truth/carla-localization/carla-localization.yml

sinks:
  - id : PyPrint
    descriptor : {{ BASE_DIR }}/nodes/sinks/generic-sink-py/generic-sink.yml

links:
- from:
    node : Camera
    output : Image
  to:
    node : ObjectDetection
    input : Image

- from:
    node : CarlaLocalization
    output : Pose
  to:
    node : TTD
    input : Pose

- from:
    node : TTD
    output : TTD
  to:
    node : ObjectDetection
    input : TTD

- from:
    node : ObjectDetection
    output : Obstacles
  to:
    node : SortTracker
    input : Obstacles

- from:
    node : TTD
    output : TTD
  to:
    node : SortTracker
    input : TTD

- from:
    node : Camera
    output : Image
  to:
    node : SortTracker
    input : Image

- from:
    node : SortTracker
    output : ObstacleTrajectories
  to:
    node : PyPrint
    input : Data
