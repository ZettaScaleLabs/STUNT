flow: ControlDataDump
configuration:
  host: '192.168.122.35'
operators:
  - id: ObjectDetection
    configuration:
      obstacle_detection_model_path: /home/ato/Workspace/models/obstacle_detection/faster-rcnn
      path_coco_labels: /home/ato/Workspace/STUNT/nodes/operators/obstacle-detector/STUNT.names
    descriptor: /home/ato/Workspace/STUNT/nodes/operators/obstacle-detector/obstacle-detector.yml

  - id: TTD
    descriptor:  /home/ato/Workspace/STUNT/nodes/operators/time-to-decision/time-to-decision.yml

  - id: SortTracker
    descriptor:  /home/ato/Workspace/STUNT/nodes/operators/sort-tracker/sort-tracker.yml

  - id: ObstacleLocationFinder
    descriptor:  /home/ato/Workspace/STUNT/nodes/operators/obstacle-location-finder/obstacle-location-finder.yml

sources:
  - id : Camera
    configuration:
      mode: "client"
      key_expression: "/stunt/center-camera"
    descriptor : /home/ato/Workspace/STUNT/nodes/sources/zenoh-camera/zenoh-camera.yml

  - id : Lidar
    configuration:
      mode: "client"
      key_expression: "/stunt/center-lidar"
    descriptor : /home/ato/Workspace/STUNT/nodes/sources/zenoh-lidar/zenoh-lidar.yml

  - id : Localization
    configuration:
      mode: "client"
      key_expression: "/stunt/ground-truth/location"
    descriptor : /home/ato/Workspace/STUNT/nodes/sources/ground-truth/zenoh-localization/zenoh-location.yml

sinks:
  - id : PyPrint
    descriptor : /home/ato/Workspace/STUNT/nodes/sinks/generic-sink-py/generic-sink.yml

links:
- from:
    node : Camera
    output : Image
  to:
    node : ObjectDetection
    input : Image

- from:
    node : Localization
    output : Pose
  to:
    node : TTD
    input : Pose

- from:
    node : TTD
    output : TTD
  to:
    node : ObjectDetection
    input : TTD

- from:
    node : ObjectDetection
    output : Obstacles
  to:
    node : SortTracker
    input : Obstacles

- from:
    node : TTD
    output : TTD
  to:
    node : SortTracker
    input : TTD

- from:
    node : Camera
    output : Image
  to:
    node : SortTracker
    input : Image

- from:
    node : Lidar
    output : LIDAR
  to:
    node : ObstacleLocationFinder
    input : LIDAR

- from:
    node : Localization
    output : Pose
  to:
    node : ObstacleLocationFinder
    input : Pose

- from:
    node : SortTracker
    output : ObstacleTrajectories
  to:
    node : ObstacleLocationFinder
    input : TrackedObstacles

- from:
    node : ObstacleLocationFinder
    output : Obstacles
  to:
    node : PyPrint
    input : Data
