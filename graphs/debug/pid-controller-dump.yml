flow: ControlDataDump
configuration:
  host: '192.168.122.35'
operators:
  - id: PerfectLocalization
    descriptor:  {{ BASE_DIR }}/nodes/operators/perfect-localization/localization.yml

  - id: BehaviourPlanning
    configuration:
      goal: [3.0, 4.0, 0.0]
    descriptor:  {{ BASE_DIR }}/nodes/operators/behaviour-planning/behaviour-planning.yml

  - id: TTD
    descriptor:  {{ BASE_DIR }}/nodes/operators/time-to-decision/time-to-decision.yml

  - id: PerfectTracker
    descriptor: {{ BASE_DIR }}/nodes/operators/perfect-tracker/perfect-tracker.yml

  - id: LinearPredictor
    descriptor: {{ BASE_DIR }}/nodes/operators/linear-predictor/linear-predictor.yml

  - id: WaypointPlanner
    descriptor: {{ BASE_DIR }}/nodes/operators/waypoint-planner/waypoint-planner.yml

  - id: PIDController
    descriptor: {{ BASE_DIR }}/nodes/operators/pid-control/pid-control.yml


sources:

  - id : CarlaTrafficLights
    descriptor : {{ BASE_DIR }}/nodes/sources/ground-truth/carla-trafficlights/carla-trafficlights.yml

  - id : CarlaObstacles
    configuration:
      type: 'vehicle.*'
    descriptor : {{ BASE_DIR }}/nodes/sources/ground-truth/carla-obstacles/carla-obstacles.yml

  - id : CarlaLocalization
    descriptor : {{ BASE_DIR }}/nodes/sources/ground-truth/carla-localization/carla-localization.yml

sinks:
  - id : PyPrint
    descriptor : {{ BASE_DIR }}/nodes/sinks/generic-sink-py/generic-sink.yml

links:
#sources
- from:
    node : CarlaLocalization
    output : Pose
  to:
    node : PerfectLocalization
    input : Pose

- from:
    node : CarlaObstacles
    output : Obstacles
  to:
    node : PerfectTracker
    input : Obstacles

# operators

- from:
    node : PerfectLocalization
    output : Pose
  to:
    node : PerfectTracker
    input : Pose

- from:
    node : PerfectLocalization
    output : Pose
  to:
    node : TTD
    input : Pose

- from:
    node : TTD
    output : TTD
  to:
    node : LinearPredictor
    input : TTD

- from:
    node : PerfectTracker
    output : ObstacleTrajectories
  to:
    node : LinearPredictor
    input : ObstacleTrajectories

- from:
    node : PerfectLocalization
    output : Pose
  to:
    node : BehaviourPlanning
    input : Pose


- from:
    node : PerfectLocalization
    output : Pose
  to:
    node : WaypointPlanner
    input : Pose

- from:
    node : BehaviourPlanning
    output : Trajectory
  to:
    node : WaypointPlanner
    input : Trajectory

- from:
    node : TTD
    output : TTD
  to:
    node : WaypointPlanner
    input : TTD

- from:
    node : LinearPredictor
    output : ObstaclePredictions
  to:
    node : WaypointPlanner
    input : ObstaclePredictions

- from:
    node : CarlaTrafficLights
    output : TrafficLights
  to:
    node : WaypointPlanner
    input : TrafficLights


- from:
    node : WaypointPlanner
    output : Waypoints
  to:
    node : PIDController
    input : Waypoints

- from:
    node : PerfectLocalization
    output : Pose
  to:
    node : PIDController
    input : Pose

# sinks
- from:
    node : PIDController
    output : Control
  to:
    node : PyPrint
    input : Data